<!DOCTYPE>
<html>

<head>
  <title></title>
  <style>
    body {
      background-color: black;
      font-family: monospace;
      line-height: 0.8rem;
      color: #777;
    }
    #bg {
      display: grid;
    }
    .layer{
      grid-column: 1;
      grid-row: 1;
      display: grid;
      width: 10ch;
      grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;
      user-select: none;
    }
    *, *::before, *::after {
      margin: 0;
    }


  </style>

  <script>
    const s = {
      bg: null,
      layers: [],
      cols: 10,
      rows: 10,
      activeLayer: null
    }

    const addLayer = () => {
      console.log("adding layer")
      // pull layer number before adding to match 0 index
      s.activeLayer = s.layers.length;
      const newLayer = document.createElement("div")
      newLayer.id = `layer_${s.activeLayer}`
      newLayer.classList.add("layer")
      const lHolder = []
      for (let c = 0; c < s.cols; c += 1) {
        const cHolder = []
        for (let r = 0; r < s.rows; r += 1) {
          const newPixel = document.createElement("pre")
          newPixel.id = `pixel_${c}_${r}`
          newPixel.innerHTML = "."
          newLayer.appendChild(newPixel)
          cHolder.push(".")
        }
        lHolder.push(cHolder)
      }
      s.layers.push(lHolder)
      s.wrap.appendChild(newLayer)
    }

    const init = () => {
      s.wrap = document.getElementById("bg")
      addLayerButton.addEventListener("click", addLayer)
      addLayer()
    }
    document.addEventListener("DOMContentLoaded", init)

  </script>
</head>

<body>
    <button id="addLayerButton">Add Layer</button>
  <div id="bg">
  </div>
</body>

</html>
